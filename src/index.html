<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<link href="https://unicons.iconscout.com/release/v4.0.0/css/line.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
	<link href="./styles.css" rel="stylesheet">
	<script src="./main.js" type="module">
	</script>
	<title>Chultrabook Controller</title>
</head>
<body style="overflow: hidden;">
	<div class="noEctools p-absolute" id="noEctools">
		<h1 class="display" id="windows">You Are Missing Coolstar's EC Driver</h1>
		<h1 class="display" id="linux">You Are Missing Ectool and Cbmem Binaries</h1>
		<h1 class="display" id="macos">You Are Missing Ectool Binary</h1>
	</div>
	<div class="app" id="blur">
		<div class="appFrame p-absolute" data-tauri-drag-region="">
			<div class="appFunctionButtons">
				<button class="minimizeButton p-absolute" id="minimize">━</button> <button class="closeButton p-absolute" id="close">✖</button>
			</div>
		</div>
		<div style="overflow-y: scroll; height: 100vh; border-bottom-right-radius: 20px; border-top-right-radius: 20px;">
			<nav>
				<!--LogoName-->
				<div class="logo-name d-flex p-relative">
					<div class="logo-image d-flex"><img alt="" class="logoFilter" src="./assets/Icons/sidenavbar/chrome.svg"></div><span class="logo_name">Chrultrabook Tools</span>
				</div><!--DashItems-->
				<div class="menu-items d-flex">
					<ul class="nav-links">
						<li>
							<div class="sidebar-toggle">
								<i class="uil uil-bars"></i>
							</div>
						</li>
						<li>
							<a class="d-flex p-relative" id="home"><img alt="" class="navbarimg homeFilter" src="./assets/Icons/sidenavbar/home.svg"> <span class="link-name">Dashboard</span></a>
						</li>
						<li>
							<a class="d-flex p-relative" id="fan"><img alt="" class="navbarimg fanFilter" src="./assets/Icons/sidenavbar/fan.svg"> <span class="link-name">Fan Control</span></a>
						</li>
						<li>
							<a class="d-flex p-relative" id="options"><img alt="" class="navbarimg systemoptionsFilter" src="./assets/Icons/sidenavbar/system-options.svg"> <span class="link-name">System Controls</span></a>
						</li>
						<li>
							<a class="d-flex p-relative" id="diagnostics"><img alt="" class="navbarimg diagnosticFilter" src="./assets/Icons/sidenavbar/Diagnostics.svg"> <span class="link-name">System Information</span></a>
						</li>
						<li>
							<a class="d-flex p-relative" id="information"><img alt="" class="navbarimg settingFilter" src="./assets/Icons/sidenavbar/settings.svg"> <span class="link-name">Settings</span></a>
						</li>
					</ul><!--DarkMode-->
					<ul class="dark-mode" style="border: none">
						<li class="mode d-flex">
							<a class="d-flex p-relative" href="#"><span class="link-name" style="padding-left: 55px; padding-bottom: 12px;">Dark Mode</span></a>
							<div class="mode-toggle d-flex p-absolute">
								<span class="switch p-relative"></span>
							</div>
						</li>
					</ul>
				</div>
			</nav><!--Dashboard-->
			<section class="dashboard p-relative" id="sectionDashboard">
				<div class="dash-content">
					<div class="overview info">
						<div class="title d-flex">
							<img src="./assets/Icons/dashboard/tachometer.svg"> <span class="text">Dashboard</span>
						</div>
						<div class="boxes">
							<div class="box cpuLoad d-flex">
								<img alt="" src="./assets/Icons/dashboard/cpu.svg"> <span class="text" style="color: var(--textbox-color);">CPU Load</span> <span id="cpuLoad" style="color: var(--textbox-color);">0%</span>
							</div>
							<div class="box cpuTemps d-flex">
								<img alt="" src="./assets/Icons/dashboard/thermometer.svg"> <span class="text" style="color: var(--textbox-color);">CPU TEMPS</span> <span id="cpuTemp" style="color: var(--textbox-color);">0°C</span>
							</div>
							<div class="box ram d-flex">
								<img alt="" src="./assets/Icons/dashboard/ram.svg"> <span class="text" style="color: var(--textbox-color);">RAM USAGE</span> <span id="ramPercentage" style="color: var(--textbox-color);">0%</span>
							</div>
						</div>
						<div class="systemInfo p-relative" id="onLoad">
							<div class="systemInfoText">
								<h4 id="cpuName"></h4>
								<h4 id="biosVersion"></h4>
								<h4 id="hostname"></h4>
								<h4 id="boardname"></h4>
								<h4 id="threadCPU"></h4>
							</div>
						</div>
					</div>
				</div>
			</section><!--fancontrols-->
			<section class="dashboard p-relative" id="sectionFan">
				<div class="dash-content">
					<div class="overview">
						<div class="title d-flex">
							<img src="./assets/Icons/fancontrol/fancontroldash.svg"> <span class="text">Fan Control</span>
						</div>
						<div class="boxes">
							<div class="box fanSpeed d-flex">
								<img alt="" src="./assets/Icons/fancontrol/animatedfan.svg"> <span class="text">Fan Speed</span> <span id="fanSpeed" style="color: var(--textbox-color);">Unknown</span>
							</div>
							<div class="box tempCPU d-flex">
								<img alt="" src="./assets/Icons/fancontrol/thermometer(white).svg"> <span class="text">CPU TEMPS</span> <span id="cpuTempFan" style="color: var(--textbox-color);">0°C</span>
							</div>
							<div class="box hidden"></div>
						</div>
						<div class="setFanSpeed">
							<h2 class="FanSpeedText p-relative">Fan Speeds</h2>
							<div class="fanButtons p-relative">
								<button class="FanAuto p-relative" id="fanAuto">Auto</button> <button class="FanOff p-relative" id="fanOff">Off</button> <button class="FanMax p-relative" id="fanMax">Max</button>
							</div>
							<div class="customFanCurves">
								<h2 class="customFanSpeedText p-absolute">Custom Fan Curves</h2>
								<div class="fancurves p-relative">
									<canvas id="fancurves"></canvas>
								</div><button class="setFan p-relative" id="setFan">set</button>
							</div>
						</div>
					</div><br>
					<h2 style="color: var(--panel-color)">.</h2><br>
				</div>
			</section><!--System Controls-->
			<section class="dashboard p-relative" id="sectionOptions">
				<div class="dash-content">
					<div class="overview">
						<div class="title d-flex">
							<img src="./assets/Icons/systemOptions/system-options.svg"> <span class="text">System Controls</span>
						</div>
						<div class="ActivityLight p-relative" id="ActivityLight">
							<h2 class="activitylightText" id="activityLightDropdown">&nbsp;&nbsp;Activity light</h2>
							<div class="dellActivityLight p-relative">
								<div class="dropdownActivityLight">
									<div class="select d-flex">
										<span class="selectedActivityLight">Pick A Color</span>
										<div class="caret"></div>
									</div>
									<ul class="menu p-absolute" id="activityLightMenu">
										<!--If you change anything here make sure to change the name in main.js-->
										<li>Off</li>
										<li>Red</li>
										<li>Green</li>
										<li>Blue</li>
										<li>White</li>
										<li>Cyan</li>
										<li>Magenta</li>
										<li>Yellow</li><!--everything else shold be fine, unless you change the class names-->
									</ul>
								</div>
							</div>
						</div>
						<div class="keyboardBacklight p-relative" id="keyboardBacklight">
							<h2 class="backlightText p-relative" id="rangeBacklight">&nbsp;&nbsp;Keyboard Backlight</h2>
							<div class="rangeBacklight p-absolute" id="rangeBacklightslider">
								<div class="sliderValue p-relative">
									<span class="p-absolute">100</span>
								</div>
								<div class="fieldBacklight d-flex p-relative">
									<div class="value p-absolute left">
										0
									</div><input id="backlightRangeSlider" max="100" min="0" step="10" type="range" value="100">
									<div class="value p-absolute right" id="backlightRangeSliderText">
										100
									</div>
								</div>
							</div>
						</div><!--Keyboard Backlight Ends-->
						<!--Charge Controls-->
						<!--
                    <div class="ChargeControl p-relative" id="ChargeControl">
                        <h2 class="ChargeControlText p-relative" id="rangeChargeControl">&nbsp;&nbsp;Charge Control</h2>
                        <div class="rangeChargeControl p-absolute" id="rangeChargeControlslider">
                            <div class="sliderValue p-relative">
                                <span>100</span>
                            </div>
                            <div class="ChargeControlField d-flex p-relative">
                                <div class="value p-absolute left">
                                    70
                                </div>
                                <input type="range" min="70" max="100" value="100" steps="1" id="chargerSlider">
                                <div class="value p-absolute right" id="chargerSliderText">100</div>
                            </div>
                        </div>
                        <button class="ChargeControlButton p-relative Set" id="chargeControlSet">Set</button>
                        <button class="ChargeControlButton p-relative Default" id="chargeControlDefault">Default</button>
                        
                    </div>
                    -->
						<!--Charger Controls ends-->
					</div>
				</div>
			</section><!--system information-->
			<section class="dashboard p-relative" id="sectionCbmem">
				<div class="dash-content">
					<div class="overview">
						<div class="title d-flex">
							<img src="./assets/Icons/cbmem/bugcbmemdash.svg"> <span class="text">System Information</span>
						</div>
					</div>
					<div class="cbmemButtons p-relative">
						<div class="dropdown">
							<div class="select d-flex">
								<span class="selected">Select</span>
								<div class="caret"></div>
							</div>
							<ul class="menu p-absolute" id="cbmemMenu">
								<!--If you change anything here make sure to change the name in main.js-->
								<li id="nomacos1">Boot Timestamps</li>
								<li id="nomacos2">Coreboot Log</li>
								<li id="nomacos3">Coreboot Extended Log</li>
								<li>EC Console Log</li>
								<li>Battery Info</li>
								<li>EC Chip Info</li>
								<li>SPI Info</li>
								<li>EC Protocol Info</li>
								<li>Temp Sensor Info</li>
								<li>Power Delivery Info</li><!--everything else shold be fine, unless you change the class names-->
							</ul>
						</div><button class="cbMem p-absolute" id="cbMem">Refresh</button> <button class="copyButton p-absolute" id="copyButton"><svg fill="#fff" aria-hidden="true" class="octicon octicon-copy" height="16" role="img" style="display: inline-block; user-select: none; vertical-align: text-bottom;" viewbox="0 0 16 16" width="16">
						<path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path>
						<path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path></svg></button>
					</div>
					<pre class="pre p-absolute">
                        <span class="cbmem">
                            <code class="code" id="cbMemInfo"></code>
                        </span>
                    </pre>
				</div>
			</section><!--settings-->
			<section class="dashboard p-relative" id="sectionSettings" style="overflow-y:scroll; overflow-x:hidden;">
				<div class="dash-content">
					<div class="overview">
						<div class="title d-flex">
							<img src="./assets/Icons/settings/settings-page.svg"> <span class="text">Settings</span>
						</div>
						<div class="settings">
							<label class="switch startupFan center p-relative" id="startupFan"><input id="startupFansInput" type="checkbox"> <span class="slider p-absolute round"></span></label> <label class="switch closeToTray center p-relative" id="systemTray"><input id="systemTrayInput" type="checkbox"> <span class="slider p-absolute round"></span></label> <label class="switch startInTray center p-relative" id="startHiddenButton"><input id="startHiddenInput" type="checkbox"> <span class="slider p-absolute round"></span></label> <label class="switch startBoot center p-relative" id="startOnBootButton"><input id="startOnBootInput" type="checkbox"> <span class="slider p-absolute round"></span></label>
							<h3 class="startupFanText lines">Start Custom Fan Curves On App Startup</h3>
							<h3 class="closeToTrayText lines">When Closed, App Minimizes To System Tray</h3>
							<h3 class="startInTrayText lines" id="startHidden">Start App In System Tray</h3>
							<h3 class="startBootText lines" id="startOnBoot">Start App On Boot</h3>
						</div>
					</div>
				</div>
			</section>
			<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js">
			</script>
		</div>
	</div>
	<script>
	   window.addEventListener("DOMContentLoaded", () => {

	       //changing menus

	       let home = document.getElementById("sectionDashboard");
	       let fan = document.getElementById("sectionFan");
	       let cbmem = document.getElementById("sectionCbmem");
	       let options = document.getElementById("sectionOptions");
	       let settings = document.getElementById("sectionSettings");

	       home.style.display = "block";
	       fan.style.display = "none";
	       options.style.display = "none";
	       cbmem.style.display = "none";
	       settings.style.display = "none";

	       function homeButton() {
	           home.style.display = "block";
	           fan.style.display = "none";
	           options.style.display = "none";
	           cbmem.style.display = "none";
	           settings.style.display = "none";
	       }

	       function fanButton() {
	           home.style.display = "none";
	           fan.style.display = "block";
	           options.style.display = "none";
	           cbmem.style.display = "none";
	           settings.style.display = "none";
	       }

	       function cbmemButton() {
	           home.style.display = "none";
	           fan.style.display = "none";
	           options.style.display = "none";
	           cbmem.style.display = "block";
	           settings.style.display = "none";
	       }

	       function optionsButton() {
	           home.style.display = "none";
	           fan.style.display = "none";
	           options.style.display = "block";
	           cbmem.style.display = "none";
	           settings.style.display = "none";
	       }

	       function infoButton() {
	           home.style.display = "none";
	           fan.style.display = "none";
	           options.style.display = "none";
	           cbmem.style.display = "none";
	           settings.style.display = "block";
	       }

	       document.getElementById("home").addEventListener("mousedown", () => {
	           homeButton();
	       });
	       document.getElementById("fan").addEventListener("mousedown", () => {
	           fanButton();
	       });
	       document.getElementById("options").addEventListener("mousedown", () => {
	           optionsButton();
	       });
	       document.getElementById("diagnostics").addEventListener("mousedown", () => {
	           cbmemButton();
	       });
	       document.getElementById("information").addEventListener("mousedown", () => {
	           infoButton();
	       });

	       //mode toggles
	       const body = document.body,
	           modeToggle = body.querySelector(".mode-toggle"),
	           sidebar = body.querySelector("nav"),
	           sidebarToggle = body.querySelector(".sidebar-toggle");

	       let getMode = localStorage.getItem("mode");
	       if (getMode && getMode === "dark") {
	           body.classList.toggle("dark");
	       }

	       let getStatus = localStorage.getItem("status");
	       if (getStatus && getStatus === "close") {
	           sidebar.classList.toggle("close");
	       }

	       modeToggle.addEventListener("mousedown", () => {
	           body.classList.toggle("dark");
	           if (body.classList.contains("dark")) {
	               localStorage.setItem("mode", "dark");
	           } else {
	               localStorage.setItem("mode", "light");
	           }
	       });

	       sidebarToggle.addEventListener("mousedown", () => {
	           sidebar.classList.toggle("close");
	           localStorage.setItem(
	               "status",
	               sidebar.classList.contains("close") ? "close" : "open"
	           );
	       });
	   });


	   const dropdowns = document.querySelectorAll(".dropdown");
	   dropdowns.forEach((dropdown) => {
	       const select = dropdown.querySelector(".select");
	       const caret = dropdown.querySelector(".caret");
	       const menu = dropdown.querySelector(".menu");
	       const options = dropdown.querySelectorAll(".menu li");
	       const selected = dropdown.querySelector(".selected");

	       select.addEventListener("mousedown", () => {
	           select.classList.toggle("select-clicked");
	           caret.classList.toggle("caret-rotate");
	           menu.classList.toggle("menu-open");
	       });

	       options.forEach((option) => {
	           option.addEventListener("mousedown", () => {
	               selected.innerText = option.innerText;
	               select.classList.remove("select-clicked");
	               caret.classList.remove("caret-rotate");
	               menu.classList.remove("menu-open");

	               options.forEach((option) => {
	                   option.classList.remove("active");
	               });
	               option.classList.add("active");
	           });
	       });
	   });

	   const dropdownActivityLight = document.querySelectorAll(".dropdownActivityLight");
	   dropdownActivityLight.forEach((dropdown) => {
	       const select = dropdown.querySelector(".select");
	       const caret = dropdown.querySelector(".caret");
	       const menu = dropdown.querySelector(".menu");
	       const options = dropdown.querySelectorAll(".menu li");
	       const selectedActivityLight = dropdown.querySelector(".selectedActivityLight");

	       select.addEventListener("mousedown", () => {
	           select.classList.toggle("select-clicked");
	           caret.classList.toggle("caret-rotate");
	           menu.classList.toggle("menu-open");
	       });

	       options.forEach((option) => {
	           option.addEventListener("mousedown", () => {
	               selectedActivityLight.innerText = option.innerText;
	               select.classList.remove("select-clicked");
	               caret.classList.remove("caret-rotate");
	               menu.classList.remove("menu-open");

	               options.forEach((option) => {
	                   option.classList.remove("active");
	               });
	               option.classList.add("active");
	           });
	       });
	   });
	</script> 
	<script type="module">
	     import { invoke } from "@tauri-apps/api/tauri";
	     setTimeout(invoke("close_splashscreen"),8000);
	</script>
</body>
</html>
