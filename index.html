<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="./src/styles.css">
    <script type="module" src="./src/main.js"></script>
    <title>Chultrabook Controller</title>

<body style="overflow: hidden;">
        <div id="notChromebook" class="notChromebook">
            <span id="notChromebookButton" class="closebtn">✖</span>
            <h1>This Computer Is Not A Modified Chromebook<br><br>This App Works Best on Modified Chromebooks</h1>
        </div>
        <div id="noEctools" class="noEctools">
            <h1 id="windows" class="windows">You Are Missing Coolstar's EC Driver</h1>
            <h1 id="linux" class="linux">You Are Missing Ectool and Cbmem Binaries</h1>
        </div>
    <div id="blur">
    <div data-tauri-drag-region class="appFrame">
        <div class="appFunctionButtons">
            <button class="minimizeButton" id="minimize">━</button>
            <button class="closeButton" id="close">✖</button>
        </div>
    </div>
    <div style="overflow-y: scroll; height: 100vh; border-bottom-right-radius: 20px;  border-top-right-radius: 20px;">
        <nav>
            <!--LogoName-->
            <div class="logo-name">
                <div class="logo-image">
                    <img class="logoFilter" src="./src/assets/Icons/sidenavbar/chrome.svg" alt="">
                </div>
                <span class="logo_name">Chrultrabook Tools</span>
            </div>
            <!--DashItems-->
            <div class="menu-items">
                <ul class="nav-links">
                    <li>
                        <div class="sidebar-toggle">
                            <i class="uil uil-bars "></i>
                        </div>
                    </li>
                    <li><a id="home">
                            <img class="navbarimg homeFilter" src="./src/assets/Icons/sidenavbar/home.svg" alt="">
                            <span class="link-name">Dashboard</span>
                        </a></li>
                    <li><a id="fan">
                            <img class="navbarimg fanFilter" src="./src/assets/Icons/sidenavbar/fan.svg" alt="">
                            <span class="link-name">Fan Control</span>
                        </a></li>
                    <li><a id="options">
                            <img class="navbarimg systemoptionsFilter"
                                src="./src/assets/Icons/sidenavbar/system-options.svg" alt="">
                            <span class="link-name">System Controls</span>
                        </a></li>
                    <li><a id="diagnostics">
                            <img class="navbarimg diagnosticFilter" src="./src/assets/Icons/sidenavbar/Diagnostics.svg"
                                alt="">
                            <span class="link-name">Memory Diagnostics</span>
                        </a></li>
                    <li><a id="information">
                            <img class="navbarimg settingFilter" src="./src/assets/Icons/sidenavbar/settings.svg"
                                alt="">
                            <span class="link-name">Settings</span>
                        </a></li>
                </ul>
                <!--DarkMode-->
                <ul style="border: none" class="dark-mode">
                    <li class="mode">

                        <div class="mode-toggle">
                            <span class="switch"></span>
                            <span class="link-name">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dark Mode</span>

                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <!--Dashboard-->
        <section id="sectionDashboard" class="dashboard">
            <div class="dash-content">
                <div class="overview info">
                    <div class="title">
                        <img src="./src/assets/Icons/dashboard/tachometer.svg">
                        <span class="text">Dashboard</span>
                    </div>

                    <div class="boxes">
                        <div class="box cpuLoad">
                            <img src="./src/assets/Icons/dashboard/cpu.svg" alt="">
                            <span class="text" style="color: var(--textbox-color);">CPU Load</span>
                            <span id="cpuLoad" style="color: var(--textbox-color);">0%</span>
                        </div>
                        <div class="box cpuTemps">
                            <img src="./src/assets/Icons/dashboard/thermometer.svg" alt="">
                            <span class="text" style="color: var(--textbox-color);">CPU TEMPS</span>
                            <span id="cpuTemp" style="color: var(--textbox-color);">0°C</span>
                        </div>
                        <div class="box ram">
                            <img src="./src/assets/Icons/dashboard/ram.svg" alt="">
                            <span class="text" style="color: var(--textbox-color);">RAM USAGE</span>
                            <span id="ramPercentage" style="color: var(--textbox-color);">0%</span>
                        </div>
                    </div>
                    <div id="onLoad" class="systemInfo">
                        <div class="systemInfoText">
                            <h4 id="cpuName"></h4>
                            <h4 id="biosVersion"></h4>
                            <h4 id="hostname"></h4>
                            <h4 id="boardname"></h4>
                            <h4 id="coreCPU"></h4>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!--fancontrols-->
        <section id="sectionFan" class="dashboard">
            <div class="dash-content">
                <div class="overview">
                    <div class="title">
                        <img src="./src/assets/Icons/fancontrol/fancontroldash.svg">
                        <span class="text">Fan Control</span>
                    </div>
                    <div class="boxes">
                        <div class="box fanSpeed">
                            <img src="./src/assets/Icons/fancontrol/animatedfan.svg" alt="">
                            <span class="text">Fan Speed</span>
                            <span id="fanSpeed" style="color: var(--textbox-color);">Unknown</span>
                        </div>
                        <div class="box tempCPU">
                            <img src="./src/assets/Icons/fancontrol/thermometer(white).svg" alt="">
                            <span class="text">CPU TEMPS</span>
                            <span id="cpuTempFan" style="color: var(--textbox-color);">0°C</span>
                        </div>
                        <div class="box hidden" height="0" width="0"></div>
                    </div>
                    <div class="setFanSpeed">
                        <h2 class="FanSpeedText">Fan Speeds</h2>
                        <div class="fanButtons">
                            <button id="fanAuto" href="#" class="FanAuto">Auto</button>
                            <button id="fanOff" href="#" class="FanOff"> Off</button>
                            <button id="fanMax" href="#" class="FanMax"> Max</button>
                        </div>
                        <div class="customFanCurves">
                            <h2 class="customFanSpeedText">Custom Fan Curves</h2>
                            <div class="fancurves">
                                <canvas id="fancurves"></canvas>
                            </div>
                            <button id="setFan" href="#" class="setFan"> set</button>
                        </div>
                    </div>
                </div>
                <br>
                <h2 style="color: var(--panel-color)">.</h2>
                <br>
        </section>
        <!--System Controls-->
        <section id="sectionOptions" class="dashboard">
            <div class="dash-content">
                <div class="overview">
                    <div class="title options">
                        <img src="./src/assets/Icons/systemOptions/system-options.svg">
                        <span class="text">System Controls</span>
                    </div>
                    <!--Keyboard Backlight Controls-->
                    <div class="keyboardBacklight" id="keyboardBacklight">
                        <h2 class="backlightText" id="rangeBacklight">&nbsp;&nbsp;Keyboard Backlight</h2>
                        <div class="rangeBacklight" id="rangeBacklightslider">
                            <div class="sliderValue">
                                <span>100</span>
                            </div>
                            <div class="fieldBacklight">
                                <div class="value left">
                                    0
                                </div>
                                <input type="range" min="0" max="100" value="100" step="10" id="backlightRangeSlider">
                                <div class="value right" id="backlightRangeSliderText">100</div>
                            </div>
                        </div>
                    </div>
                    <!--Keyboard Backlight Ends-->
                    <!--Charge Controls-->
                    <div class="ChargeControl" id="ChargeControl">
                        <h2 class="ChargeControlText" id="rangeChargeControl">&nbsp;&nbsp;Charge Control</h2>
                        <div class="rangeChargeControl" id="rangeChargeControlslider">
                            <div class="sliderValue">
                                <span>100</span>
                            </div>
                            <div class="ChargeControlField">
                                <div class="value left">
                                    70
                                </div>
                                <input type="range" min="70" max="100" value="100" steps="1" id="chargerSlider">
                                <div class="value right" id="chargerSliderText">100</div>
                            </div>
                        </div>
                        <button class="ChargeControlButton Set" id="chargeControlSet">Set</button>
                        <button class="ChargeControlButton Default" id="chargeControlDefault">Default</button>
                    </div>
                    <!--Charger Controls ends-->
                </div>
            </div>
        </section>
        <!--system information-->
        <section id="sectionCbmem" class="dashboard">

            <div class="dash-content">
                <div class="overview">
                    <div class="title">
                        <img src="./src/assets/Icons/cbmem/bugcbmemdash.svg">
                        <span class="text">System Information</span>
                    </div>

                </div>

                <div class="cbmemButtons">
                    <div class="dropdown">
                        <div class="select">
                            <span class="selected">Select</span>
                            <div class="caret"></div>
                        </div>
                        <ul class="menu">
                            <!--If you change anything here make sure to change the name in main.js-->
                            <li>Boot Timestamps</li>
                            <li>Coreboot Log</li>
                            <li>Coreboot Extended Log</li>
                            <li>EC Console Log</li>
                            <li>Battery Info</li>
                            <li>EC Chip Info</li>
                            <li>SPI Info</li>
                            <li>EC Protocol Info</li>
                            <li>Temp Sensor Info</li>
                            <li>Power Delivery Info</li>
                            <!--everything else shold be fine, unless you change the class names-->
                        </ul>
                    </div>
                    <button id="cbMem" href="#" class="cbMem">Get Info</button>
                    <button id="copyButton" class="copyButton">
                        <svg aria-hidden="true" focusable="false" role="img" class="octicon octicon-copy"
                            viewBox="0 0 16 16" width="16" height="16" fill="currentColor"
                            style="display: inline-block; user-select: none; vertical-align: text-bottom;">
                            <path
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z">
                            </path>
                            <path
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z">
                            </path>
                        </svg>
                    </button>
                </div>
                <pre class="pre">
                        <span class="cbmem">
                            <code class="code" id="cbMemInfo"></code>
                        </span>
                    </pre>
            </div>
        </section>
        <!--settings-->
        <section id="sectionSettings" class="dashboard" style="overflow-y:scroll; overflow-x:hidden;">
            <div class="dash-content">
                <div class="overview">
                    <div class="title">
                        <img src="./src/assets/Icons/settings/settings-page.svg">
                        <span class="text">Settings </span>
                    </div>
                    <div class="settings">
                        <label class="switch startupFan center" id="startupFan">
                            <input id="startupFansInput" type="checkbox">
                            <span class="slider round"></span>
                        </label>
                        <label class="switch closeToTray center" id="systemTray">
                            <input id="systemTrayInput" type="checkbox">
                            <span class="slider round"></span>
                        </label>
                        <label class="switch startInTray center" id="startHiddenButton">
                            <input id="startHiddenInput" type="checkbox">
                            <span class="slider round"></span>
                        </label>
                        <label class="switch startBoot center" id="startOnBootButton">
                            <input id="startOnBootInput" type="checkbox">
                            <span class="slider round"></span>
                        </label>
                        <h3 class="startupFanText lines">Start Custom Fan Curves On App Startup</h3>
                        <h3 class="closeToTrayText lines">When Closed, App Minimizes To System Tray</h3>
                        <h3 class="startInTrayText lines" id="startHidden">Start App In System Tray</h3>
                        <h3 class="startBootText lines" id="startOnBoot">Start App On Boot</h3>
                    </div>
                </div>

            </div>
        </section>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
            crossorigin="anonymous"></script>
    </div>
</div>
</body>
<script>
    window.addEventListener("DOMContentLoaded", () => {

        //changing menus

        var home = document.getElementById("sectionDashboard");
        var fan = document.getElementById("sectionFan");
        var cbmem = document.getElementById("sectionCbmem");
        var options = document.getElementById("sectionOptions");
        var settings = document.getElementById("sectionSettings");

        home.style.display = "block";
        fan.style.display = "none";
        options.style.display = "none";
        cbmem.style.display = "none";
        settings.style.display = "none";

        function homeButton() {
            home.style.display = "block";
            fan.style.display = "none";
            options.style.display = "none";
            cbmem.style.display = "none";
            settings.style.display = "none";
        }

        function fanButton() {
            home.style.display = "none";
            fan.style.display = "block";
            options.style.display = "none";
            cbmem.style.display = "none";
            settings.style.display = "none";
        }

        function cbmemButton() {
            home.style.display = "none";
            fan.style.display = "none";
            options.style.display = "none";
            cbmem.style.display = "block";
            settings.style.display = "none";
        }

        function optionsButton() {
            home.style.display = "none";
            fan.style.display = "none";
            options.style.display = "block";
            cbmem.style.display = "none";
            settings.style.display = "none";
        }

        function infoButton() {
            home.style.display = "none";
            fan.style.display = "none";
            options.style.display = "none";
            cbmem.style.display = "none";
            settings.style.display = "block";
        }

        document.getElementById("home").addEventListener("mousedown", () => {
            homeButton();
        });
        document.getElementById("fan").addEventListener("mousedown", () => {
            fanButton();
        });
        document.getElementById("options").addEventListener("mousedown", () => {
            optionsButton();
        });
        document.getElementById("diagnostics").addEventListener("mousedown", () => {
            cbmemButton();
        });
        document.getElementById("information").addEventListener("mousedown", () => {
            infoButton();
        });

        //mode toggles
        const body = document.body,
            modeToggle = body.querySelector(".mode-toggle"),
            sidebar = body.querySelector("nav"),
            sidebarToggle = body.querySelector(".sidebar-toggle");

        let getMode = localStorage.getItem("mode");
        if (getMode && getMode === "dark") {
            body.classList.toggle("dark");
        }

        let getStatus = localStorage.getItem("status");
        if (getStatus && getStatus === "close") {
            sidebar.classList.toggle("close");
        }

        modeToggle.addEventListener("mousedown", () => {
            body.classList.toggle("dark");
            if (body.classList.contains("dark")) {
                localStorage.setItem("mode", "dark");
            } else {
                localStorage.setItem("mode", "light");
            }
        });

        sidebarToggle.addEventListener("mousedown", () => {
            sidebar.classList.toggle("close");
            localStorage.setItem(
                "status",
                sidebar.classList.contains("close") ? "close" : "open"
            );
        });
    });


    const dropdowns = document.querySelectorAll(".dropdown");
    dropdowns.forEach((dropdown) => {
        const select = dropdown.querySelector(".select");
        const caret = dropdown.querySelector(".caret");
        const menu = dropdown.querySelector(".menu");
        const options = dropdown.querySelectorAll(".menu li");
        const selected = dropdown.querySelector(".selected");

        select.addEventListener("mousedown", () => {
            select.classList.toggle("select-clicked");
            caret.classList.toggle("caret-rotate");
            menu.classList.toggle("menu-open");
        });

        options.forEach((option) => {
            option.addEventListener("mousedown", () => {
                selected.innerText = option.innerText;
                select.classList.remove("select-clicked");
                caret.classList.remove("caret-rotate");
                menu.classList.remove("menu-open");

                options.forEach((option) => {
                    option.classList.remove("active");
                });
                option.classList.add("active");
            });
        });
    });

    const dropdownActivityLight = document.querySelectorAll(".dropdownActivityLight");
    dropdownActivityLight.forEach((dropdown) => {
        const select = dropdown.querySelector(".select");
        const caret = dropdown.querySelector(".caret");
        const menu = dropdown.querySelector(".menu");
        const options = dropdown.querySelectorAll(".menu li");
        const selectedActivityLight = dropdown.querySelector(".selectedActivityLight");

        select.addEventListener("mousedown", () => {
            select.classList.toggle("select-clicked");
            caret.classList.toggle("caret-rotate");
            menu.classList.toggle("menu-open");
        });

        options.forEach((option) => {
            option.addEventListener("mousedown", () => {
                selectedActivityLight.innerText = option.innerText;
                select.classList.remove("select-clicked");
                caret.classList.remove("caret-rotate");
                menu.classList.remove("menu-open");

                options.forEach((option) => {
                    option.classList.remove("active");
                });
                option.classList.add("active");
            });
        });
    });
</script>
<script type="module">
      import { invoke } from "@tauri-apps/api/tauri";
      setTimeout(invoke("close_splashscreen"),8000);
</script>

</html>